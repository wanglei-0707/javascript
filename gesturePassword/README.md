## 手势密码

这是找实习期间，360前端星计划留的作业，花了6、7个小时完成

### 作业要求
作业要求是完成一个移动端网页，允许用户设置手势密码和验证手势密码，已设置的密码记录在本地localStorage中。

### 实现思路
使用立即函数将整个代码包裹起来，封装成一个组件，构造函数里设置了默认的参数，创建实例时可以传入自定义参数。

1. 初始化时，设置canvas元素的宽和高，计算9个点的圆心所在的坐标，并保存在实例属性points数组中，并绘制9个点。
2. 然后是绑定触摸事件实例函数，事件包括touchstart，touchmove，touchend，要注意的一点就是要在这些事件处理函数中取消事件的默认行为，因为在手机上上下滑动网页时有个默认的行为就是网页跟随手指滑动。这几个处理函数公用一些变量，包括path，firstPath，isEnd。path用来记录每一次触摸过程中经过的所有的点的路径，在touchstart的处理函数中初始化为空字符串，滑动过程中通过inWhichPoint函数判断当前触摸点在哪个圆点中，在圆点中就将该圆点添加到path后。设置密码时，第一遍设置成功后将密码保存在firstPath变量中，重复密码时和firstPath进行比较，来判断密码是否一致。一致后将密码保存到本地localStorage中。
3. 每一次触摸事件完成后，调用setTimeout函数，经过2秒后刷新重绘画布。

### 注意点
密码的设置有两个注意点：
1. 不允许再次经过已经经过的点时。比如已经经过123，此时在返回连接2这个点就会出现重复，这种情况是不允许的，此时会手动触发touchend事件，结束此次触摸事件，密码保存为123。因为手动触发了touchend事件，所以执行了一遍touchend事件处理函数，但是当手离开屏幕，还会再触发一次touchend事件，所以我使用了isEnd这个布尔变量，记录触摸事件是否结束。
2. 当连个点的链接是跨越中间的一个点时，这种情况下将中间的点也加到密码中。例如，从1开始，绕过2，去连接3，这种情况下因为1,2,3在一条直线上，所以把2自动加到密码中，此时的密码就是123.
以上两点我是看目前的手机都是这么处理这两种情况的，所以我也是这么实现的。

### 测试
使用了魅族note3，魅蓝note1，红米note4，红米pro，iphone6进行测试。
